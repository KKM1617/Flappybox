
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - User Searches</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Admin Panel - User Search Records</h1>

    <input type="password" id="admin-pass" placeholder="Enter Admin Password" />
    <button onclick="unlock()">Unlock</button>

    <div id="searches-section" style="display: none;">
        <ul id="searches-list"></ul>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAEvNPmZd9-C4FJa7Fp_8hHeLnDkGG4CGg",
          authDomain: "reselling-app-3c8fe.firebaseapp.com",
          projectId: "reselling-app-3c8fe",
          storageBucket: "reselling-app-3c8fe.firebasestorage.app",
          messagingSenderId: "661888641900",
          appId: "1:661888641900:web:7cb5493736bed4547c6149"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function fetchUserSearches() {
            const querySnapshot = await getDocs(collection(db, "user_searches"));
            const list = document.getElementById('searches-list');
            list.innerHTML = '';

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                const li = document.createElement('li');
                li.textContent = `${data.uid} searched: ${data.searchItem} [${new Date(data.timestamp.seconds * 1000).toLocaleString()}]`;
                list.appendChild(li);
            });
        }

        function unlock() {
            const pass = document.getElementById('admin-pass').value;
            if (pass === "Britishpark@1617") { // Change this password
                document.getElementById('searches-section').style.display = 'block';
                fetchUserSearches();
            } else {
                alert('Wrong password!');
            }
        }
    </script>
</body>
</html>
